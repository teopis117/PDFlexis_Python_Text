<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <title>Resultado del Análisis de Texto</title>
    <style>
        mark {
            background-color: yellow;
            color: black;
        }
        .scrollable {
            max-height: 500px;
            overflow-y: auto;
        }
        .table td {
            word-wrap: break-word;
        }
        .result-section {
            border: 1px solid #ced4da;
            border-radius: .25rem;
            background-color: #f8f9fa;
            padding: 20px;
            margin-bottom: 20px;
        }
    </style>
  </head>
  <body>
    <div class="container py-5">
        <h1 class="text-center mb-4">Resultado del Análisis de Texto</h1>

        <div class="result-section">
            <h2>Resumen</h2>
            <p>Número total de palabras: {{ cantidad_de_palabras }}</p>
            <p>Índice de legibilidad Flesch: {{ indice_flesch }}</p>
            <h2>Calificación del documento: {{ calificacion }}</h2>
            <p>Explicación: {{ explicacion_calificacion }}</p>
        </div>

        <div class="result-section">
            <h2>Errores Gramaticales</h2>
            <p>Cantidad de errores: {{ errores_gramaticales|length }}</p>
            <div class="scrollable">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Error</th>
                            <th>Correcciones sugeridas</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for error in errores_gramaticales %}
                        <tr>
                            <td>{{ error.context }}</td>
                            <td>{{ error.replacements|join(', ') }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="result-section">
            <h2>Palabras más frecuentes</h2>
            <div class="scrollable">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Palabra</th>
                            <th>Frecuencia</th>
                            <th>Porcentaje</th>
                            <th>Sinónimos</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for dato in resultado %}
                        <tr>
                            <td>{{ dato.palabra }}</td>
                            <td>{{ dato.frecuencia }}</td>
                            <td>{{ dato.porcentaje }}%</td>
                            <td>{{ dato.sinonimos|join(', ') }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <div class="result-section">
            <h2>Texto con palabras resaltadas</h2>
            <p class="scrollable" style="white-space: pre-wrap;">{{ texto_resaltado|safe }}</p>
        </div>

        <div class="result-section">
            <h2>Sobre la calificación</h2>
            <p>La calificación se basa en el índice de legibilidad Flesch, la frecuencia y variedad de palabras, y la cantidad de errores gramaticales en el texto. Una calificación alta indica que el texto es fácil de leer y bien escrito, mientras que una calificación baja indica que el texto puede ser difícil de entender o tiene muchos errores gramaticales. Esta es una guía general y puede no ser precisa para todos los textos y lectores. Para más detalles, consulte las referencias de la APA.</p>
        </div>
    </div>
  </body>
</html>
